(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["plugin-gb28181"]=e():t["plugin-gb28181"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s="fb15")}({"0da8":function(t,e,r){"use strict";var n=r("7dda"),o=r.n(n);o.a},"1fb5":function(t,e,r){"use strict";e.byteLength=h,e.toByteArray=f,e.fromByteArray=g;for(var n=[],o=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)n[s]=a[s],o[a.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");-1===r&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function h(t){var e=u(t),r=e[0],n=e[1];return 3*(r+n)/4-n}function l(t,e,r){return 3*(e+r)/4-r}function f(t){var e,r,n=u(t),a=n[0],s=n[1],c=new i(l(t,a,s)),h=0,f=s>0?a-4:a;for(r=0;r<f;r+=4)e=o[t.charCodeAt(r)]<<18|o[t.charCodeAt(r+1)]<<12|o[t.charCodeAt(r+2)]<<6|o[t.charCodeAt(r+3)],c[h++]=e>>16&255,c[h++]=e>>8&255,c[h++]=255&e;return 2===s&&(e=o[t.charCodeAt(r)]<<2|o[t.charCodeAt(r+1)]>>4,c[h++]=255&e),1===s&&(e=o[t.charCodeAt(r)]<<10|o[t.charCodeAt(r+1)]<<4|o[t.charCodeAt(r+2)]>>2,c[h++]=e>>8&255,c[h++]=255&e),c}function p(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function d(t,e,r){for(var n,o=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(255&t[i+2]),o.push(p(n));return o.join("")}function g(t){for(var e,r=t.length,o=r%3,i=[],a=16383,s=0,c=r-o;s<c;s+=a)i.push(d(t,s,s+a>c?c:s+a));return 1===o?(e=t[r-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[r-2]<<8)+t[r-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),i.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},"6e0b":function(t,e,r){},"72fc":function(t,e,r){"use strict";var n=r("6e0b"),o=r.n(n);o.a},"7dda":function(t,e,r){},8875:function(t,e,r){var n,o,i;(function(r,a){o=[],n=a,i="function"===typeof n?n.apply(e,o):n,void 0===i||(t.exports=i)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(p){var r,n,o,i=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,a=/@([^@]*):(\d+):(\d+)\s*$/gi,s=i.exec(p.stack)||a.exec(p.stack),c=s&&s[1]||!1,u=s&&s[2]||!1,h=document.location.href.replace(document.location.hash,""),l=document.getElementsByTagName("script");c===h&&(r=document.documentElement.outerHTML,n=new RegExp("(?:[^\\n]+?\\n){0,"+(u-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),o=r.replace(n,"$1").trim());for(var f=0;f<l.length;f++){if("interactive"===l[f].readyState)return l[f];if(l[f].src===c)return l[f];if(c===h&&l[f].innerHTML&&l[f].innerHTML.trim()===o)return l[f]}return null}}return t}))},"88a2":function(t,e,r){"use strict";(function(t){r.d(e,"b",(function(){return s})),r.d(e,"a",(function(){return n}));const n={stop:"stop",right:"right",left:"left",up:"up",down:"down",leftUp:"leftUp",leftDown:"leftDown",rightUp:"rightUp",rightDown:"rightDown",zoomFar:"zoomFar",zoomNear:"zoomNear",apertureFar:"apertureFar",apertureNear:"apertureNear",focusFar:"focusFar",focusNear:"focusNear",setPos:"setPos",calPos:"calPos",delPos:"delPos"},o={stop:0,right:1,left:2,up:8,down:4,leftUp:10,leftDown:6,rightUp:9,rightDown:5,zoomFar:16,zoomNear:32,apertureFar:72,apertureNear:68,focusFar:66,focusNear:65,setPos:129,calPos:130,delPos:131},i=[25,50,75,100,125,150,175,200,225,250],a=[1,2,3,4,5,6,7,8,9,16];function s(t){const{type:e,speed:r,index:i}=t,a=c(r);let s,l,f,p;switch(s=o[e],e){case n.up:case n.down:case n.apertureFar:case n.apertureNear:f=a;break;case n.right:case n.left:case n.focusFar:case n.focusNear:l=a;break;case n.leftUp:case n.leftDown:case n.rightUp:case n.rightDown:l=a,f=a;break;case n.zoomFar:case n.zoomNear:p=16;break;case n.calPos:case n.delPos:case n.setPos:f=u(i);break;default:break}return h(s,l,f,p)}function c(t){t=t||5;const e=t-1,r=i[e]||i[4];return r}function u(t){return a[t-1]}function h(e,r,n,o){let i=t.alloc(8);return i[0]=165,i[1]=15,i[2]=1,e&&(i[3]=e),r&&(i[4]=r),n&&(i[5]=n),o&&(i[6]=o),i[7]=(i[0]+i[1]+i[2]+i[3]+i[4]+i[5]+i[6])%256,l(i)}function l(t){let e="";for(let r=0;r<t.length;r++){let n=t[r].toString(16);1===n.length&&(n="0"+n),e+=n.toUpperCase()}return e}}).call(this,r("b639").Buffer)},9152:function(t,e){e.read=function(t,e,r,n,o){var i,a,s=8*o-n-1,c=(1<<s)-1,u=c>>1,h=-7,l=r?o-1:0,f=r?-1:1,p=t[e+l];for(l+=f,i=p&(1<<-h)-1,p>>=-h,h+=s;h>0;i=256*i+t[e+l],l+=f,h-=8);for(a=i&(1<<-h)-1,i>>=-h,h+=n;h>0;a=256*a+t[e+l],l+=f,h-=8);if(0===i)i=1-u;else{if(i===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),i-=u}return(p?-1:1)*a*Math.pow(2,i-n)},e.write=function(t,e,r,n,o,i){var a,s,c,u=8*i-o-1,h=(1<<u)-1,l=h>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),e+=a+l>=1?f/c:f*Math.pow(2,1-l),e*c>=2&&(a++,c/=2),a+l>=h?(s=0,a=h):a+l>=1?(s=(e*c-1)*Math.pow(2,o),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;t[r+p]=255&s,p+=d,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;t[r+p]=255&a,p+=d,a/=256,u-=8);t[r+p-d]|=128*g}},b60b:function(t,e,r){},b639:function(t,e,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r("1fb5"),o=r("9152"),i=r("e3db");function a(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=u.prototype):(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(t,e,r);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return p(this,t)}return h(this,t,e,r)}function h(t,e,r,n){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?w(t,e,r,n):"string"===typeof e?d(t,e,r):m(t,e)}function l(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e,r,n){return l(e),e<=0?c(t,e):void 0!==r?"string"===typeof n?c(t,e).fill(r,n):c(t,e).fill(r):c(t,e)}function p(t,e){if(l(e),t=c(t,e<0?0:0|v(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function d(t,e,r){if("string"===typeof r&&""!==r||(r="utf8"),!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|b(e,r);t=c(t,n);var o=t.write(e,r);return o!==n&&(t=t.slice(0,o)),t}function g(t,e){var r=e.length<0?0:0|v(e.length);t=c(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function w(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),u.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=u.prototype):t=g(t,e),t}function m(t,e){if(u.isBuffer(e)){var r=0|v(e.length);return t=c(t,r),0===t.length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||et(e.length)?c(t,0):g(t,e);if("Buffer"===e.type&&i(e.data))return g(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function v(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function y(t){return+t!=t&&(t=0),u.alloc(+t)}function b(t,e){if(u.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return K(t).length;default:if(n)return q(t).length;e=(""+e).toLowerCase(),n=!0}}function _(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return O(this,e,r);case"utf8":case"utf-8":return I(this,e,r);case"ascii":return B(this,e,r);case"latin1":case"binary":return L(this,e,r);case"base64":return x(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function P(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function S(t,e,r,n,o){if(0===t.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"===typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:C(t,e,r,n,o);if("number"===typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):C(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function C(t,e,r,n,o){var i,a=1,s=t.length,c=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,r/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var h=-1;for(i=r;i<s;i++)if(u(t,i)===u(e,-1===h?0:i-h)){if(-1===h&&(h=i),i-h+1===c)return h*a}else-1!==h&&(i-=i-h),h=-1}else for(r+c>s&&(r=s-c),i=r;i>=0;i--){for(var l=!0,f=0;f<c;f++)if(u(t,i+f)!==u(e,f)){l=!1;break}if(l)return i}return-1}function T(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n),n>o&&(n=o)):n=o;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function R(t,e,r,n){return tt(q(e,t.length-r),t,r,n)}function E(t,e,r,n){return tt(Q(e),t,r,n)}function D(t,e,r,n){return E(t,e,r,n)}function A(t,e,r,n){return tt(K(e),t,r,n)}function z(t,e,r,n){return tt(G(e,t.length-r),t,r,n)}function x(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function I(t,e,r){r=Math.min(t.length,r);var n=[],o=e;while(o<r){var i,a,s,c,u=t[o],h=null,l=u>239?4:u>223?3:u>191?2:1;if(o+l<=r)switch(l){case 1:u<128&&(h=u);break;case 2:i=t[o+1],128===(192&i)&&(c=(31&u)<<6|63&i,c>127&&(h=c));break;case 3:i=t[o+1],a=t[o+2],128===(192&i)&&128===(192&a)&&(c=(15&u)<<12|(63&i)<<6|63&a,c>2047&&(c<55296||c>57343)&&(h=c));break;case 4:i=t[o+1],a=t[o+2],s=t[o+3],128===(192&i)&&128===(192&a)&&128===(192&s)&&(c=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s,c>65535&&c<1114112&&(h=c))}null===h?(h=65533,l=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),o+=l}return U(n)}e.Buffer=u,e.SlowBuffer=y,e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:a(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return h(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return f(null,t,e,r)},u.allocUnsafe=function(t){return p(null,t)},u.allocUnsafeSlow=function(t){return p(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=u.allocUnsafe(e),o=0;for(r=0;r<t.length;++r){var a=t[r];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n},u.byteLength=b,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)P(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)P(this,e,e+3),P(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)P(this,e,e+7),P(this,e+1,e+6),P(this,e+2,e+5),P(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?I(this,0,t):_.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,n,o){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,o>>>=0,this===t)return 0;for(var i=o-n,a=r-e,s=Math.min(i,a),c=this.slice(n,o),h=t.slice(e,r),l=0;l<s;++l)if(c[l]!==h[l]){i=c[l],a=h[l];break}return i<a?-1:a<i?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return S(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return S(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"===typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return T(this,t,e,r);case"utf8":case"utf-8":return R(this,t,e,r);case"ascii":return E(this,t,e,r);case"latin1":case"binary":return D(this,t,e,r);case"base64":return A(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function U(t){var e=t.length;if(e<=M)return String.fromCharCode.apply(String,t);var r="",n=0;while(n<e)r+=String.fromCharCode.apply(String,t.slice(n,n+=M));return r}function B(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function L(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function O(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=e;i<r;++i)o+=Z(t[i]);return o}function k(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function Y(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function j(t,e,r,n,o,i){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function N(t,e,r,n){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-r,2);o<i;++o)t[r+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function $(t,e,r,n){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-r,4);o<i;++o)t[r+o]=e>>>8*(n?o:3-o)&255}function F(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function H(t,e,r,n,i){return i||F(t,e,r,4,34028234663852886e22,-34028234663852886e22),o.write(t,e,r,n,23,4),r+4}function V(t,e,r,n,i){return i||F(t,e,r,8,17976931348623157e292,-17976931348623157e292),o.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){var r,n=this.length;if(t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)r=this.subarray(t,e),r.__proto__=u.prototype;else{var o=e-t;r=new u(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+t]}return r},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||Y(t,e,this.length);var n=this[t],o=1,i=0;while(++i<e&&(o*=256))n+=this[t+i]*o;return n},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||Y(t,e,this.length);var n=this[t+--e],o=1;while(e>0&&(o*=256))n+=this[t+--e]*o;return n},u.prototype.readUInt8=function(t,e){return e||Y(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||Y(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||Y(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||Y(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||Y(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||Y(t,e,this.length);var n=this[t],o=1,i=0;while(++i<e&&(o*=256))n+=this[t+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||Y(t,e,this.length);var n=e,o=1,i=this[t+--n];while(n>0&&(o*=256))i+=this[t+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},u.prototype.readInt8=function(t,e){return e||Y(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||Y(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){e||Y(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return e||Y(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||Y(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||Y(t,4,this.length),o.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||Y(t,4,this.length),o.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||Y(t,8,this.length),o.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||Y(t,8,this.length),o.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){var o=Math.pow(2,8*r)-1;j(this,t,e,r,o,0)}var i=1,a=0;this[e]=255&t;while(++a<r&&(i*=256))this[e+a]=t/i&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){var o=Math.pow(2,8*r)-1;j(this,t,e,r,o,0)}var i=r-1,a=1;this[e+i]=255&t;while(--i>=0&&(a*=256))this[e+i]=t/a&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):$(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):$(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);j(this,t,e,r,o-1,-o)}var i=0,a=1,s=0;this[e]=255&t;while(++i<r&&(a*=256))t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);j(this,t,e,r,o-1,-o)}var i=r-1,a=1,s=0;this[e+i]=255&t;while(--i>=0&&(a*=256))t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):$(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):$(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return H(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return H(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return V(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return V(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var o,i=n-r;if(this===t&&r<e&&e<n)for(o=i-1;o>=0;--o)t[o+e]=this[o+r];else if(i<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},u.prototype.fill=function(t,e,r,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"===typeof t)for(i=e;i<r;++i)this[i]=t;else{var a=u.isBuffer(t)?t:q(new u(t,n).toString()),s=a.length;for(i=0;i<r-e;++i)this[i+e]=a[i%s]}return this};var J=/[^+\/0-9A-Za-z-_]/g;function W(t){if(t=X(t).replace(J,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function X(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function q(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],a=0;a<n;++a){if(r=t.charCodeAt(a),r>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function Q(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function G(t,e){for(var r,n,o,i=[],a=0;a<t.length;++a){if((e-=2)<0)break;r=t.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n)}return i}function K(t){return n.toByteArray(W(t))}function tt(t,e,r,n){for(var o=0;o<n;++o){if(o+r>=e.length||o>=t.length)break;e[o+r]=t[o]}return o}function et(t){return t!==t}}).call(this,r("c8ba"))},c8ba:function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"===typeof window&&(r=window)}t.exports=r},d386:function(t,e,r){},e3db:function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},f20e:function(t,e,r){"use strict";var n=r("d386"),o=r.n(n);o.a},fa43:function(t,e,r){"use strict";var n=r("b60b"),o=r.n(n);o.a},fb15:function(t,e,r){"use strict";if(r.r(e),"undefined"!==typeof window){var n=window.document.currentScript,o=r("8875");n=o(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:o});var i=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(r.p=i[1])}var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[0===t.$parent.titleTabActive?r("div",{staticClass:"tabpanel"},[r("mu-data-table",{attrs:{data:t.Devices,columns:t.columns},scopedSlots:t._u([{key:"expand",fn:function(e){return[r("mu-data-table",{attrs:{data:e.row.Channels,columns:t.columns2},scopedSlots:t._u([{key:"default",fn:function(n){var o=n.row,i=n.$index;return[r("td",[t._v(t._s(o.DeviceID))]),r("td",[t._v(t._s(o.Name))]),r("td",[t._v(t._s(o.Manufacturer))]),r("td",[t._v(t._s(o.Address))]),r("td",[t._v(t._s(o.Status))]),r("td",[o.Connected?r("mu-button",{attrs:{flat:""},on:{click:function(r){return t.ptz(e.row.ID,i,o)}}},[t._v("云台 ")]):t._e(),o.Connected?r("mu-button",{attrs:{flat:""},on:{click:function(r){return t.bye(e.row.ID,i,o)}}},[t._v("断开 ")]):r("mu-button",{attrs:{flat:""},on:{click:function(r){return t.invite(e.row.ID,i,o)}}},[t._v("连接 ")]),r("mu-button",{attrs:{flat:""},on:{click:function(r){return t.getRecords(e.row.ID,i,o)}}},[t._v("录像")])],1)]}}],null,!0)})]}},{key:"default",fn:function(e){var n=e.row;return[r("td",[t._v(t._s(n.ID))]),r("td",[t._v(t._s(n.Addr))]),r("td",[t._v(t._s(n.Channels?n.Channels.length:0))]),r("td",[r("StartTime",{attrs:{value:n.RegisterTime}})],1),r("td",[r("StartTime",{attrs:{value:n.UpdateTime}})],1),r("td",[t._v(t._s(n.Status))])]}}],null,!1,1876037054)})],1):t._e(),1===t.$parent.titleTabActive?r("div",{staticClass:"tabpanel"},[r("div",{staticClass:"flex-box"},[t._l(t.channelShowList,(function(e,n){return[e.DeviceID?r("div",{key:n,staticClass:"flex-item"},[r("webrtc-player2",{attrs:{"stream-path":"gb28181/"+e.DeviceID}})],1):t._e()]}))],2),t.channelList.length>0?[r("Page",{attrs:{total:t.channelList.length,"page-size":t.pageInfo.onePageSize},on:{"on-change":t.handlePageChange}})]:t._e()],2):t._e(),r("webrtc-player",{ref:"player",on:{ptz:t.sendPtz},model:{value:t.previewStreamPath,callback:function(e){t.previewStreamPath=e},expression:"previewStreamPath"}}),r("records",{ref:"records",attrs:{search:t.recordSearch,channel:t.currentChannel},on:{close:t.initRecordSearch},model:{value:t.recordModal,callback:function(e){t.recordModal=e},expression:"recordModal"}})],1)},s=[],c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Modal",t._g(t._b({attrs:{draggable:"",width:"750",title:t.streamPath},on:{"on-ok":t.onClosePreview,"on-cancel":t.onClosePreview}},"Modal",t.$attrs,!1),t.$listeners),[r("div",{staticClass:"container"},[r("video",{ref:"webrtc",attrs:{width:"488",height:"275",autoplay:"",muted:"",controls:""},domProps:{srcObject:t.stream,muted:!0}}),r("div",{staticClass:"control"},[t._l(8,(function(e){return r("svg",{class:"arrow"+e,attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"64",height:"64"},on:{click:function(r){return t.ptzCmdDirection(e)}}},[r("defs"),r("path",{attrs:{d:"M682.666667 955.733333H341.333333a17.066667 17.066667 0 0 1-17.066666-17.066666V529.066667H85.333333a17.066667 17.066667 0 0 1-12.066133-29.1328l426.666667-426.666667a17.0496 17.0496 0 0 1 24.132266 0l426.666667 426.666667A17.066667 17.066667 0 0 1 938.666667 529.066667H699.733333v409.6a17.066667 17.066667 0 0 1-17.066666 17.066666z m-324.266667-34.133333h307.2V512a17.066667 17.066667 0 0 1 17.066667-17.066667h214.801066L512 109.4656 126.532267 494.933333H341.333333a17.066667 17.066667 0 0 1 17.066667 17.066667v409.6z","p-id":"6849"}})])})),r("svg",{staticClass:"arrow9",attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},on:{mousedown:t.startPtzCmdCycle,mouseup:t.stopPtzCmdCycle}},[r("path",{attrs:{d:"M512 960c-210.96 0-395.36-149.68-438.47-355.91-2.98-14.24 6.16-28.21 20.4-31.19 14.22-2.93 28.21 6.15 31.18 20.41C163.15 775.25 325.86 907.29 512 907.29s348.85-132.05 386.89-313.98c2.99-14.26 16.97-23.35 31.19-20.41 14.24 2.99 23.38 16.95 20.41 31.19C907.36 810.32 722.95 960 512 960zM927.48 466.94c-12.61 0-23.75-9.07-25.95-21.91C869.06 254.78 705.24 116.71 512 116.71c-193.23 0-357.05 138.07-389.52 328.32-2.45 14.35-16.08 24.01-30.41 21.54-14.35-2.46-23.99-16.07-21.55-30.42C107.33 220.51 293 64 512 64c219.01 0 404.68 156.51 441.48 372.15 2.44 14.35-7.21 27.97-21.54 30.42-1.5 0.25-3 0.37-4.46 0.37z"}}),r("path",{attrs:{d:"M96.52 466.94c-9.11 0-17.97-4.72-22.85-13.18-7.28-12.61-2.96-28.72 9.64-36l131.76-76.07c12.6-7.26 28.73-2.96 36 9.65 7.28 12.61 2.96 28.72-9.64 36l-131.76 76.07a26.18 26.18 0 0 1-13.15 3.53zM792.95 701.14c-9.11 0-17.96-4.72-22.85-13.18-7.28-12.6-2.96-28.72 9.64-36l131.76-76.09c12.58-7.28 28.72-2.95 36 9.65 7.27 12.6 2.96 28.72-9.65 36l-131.75 76.1a26.271 26.271 0 0 1-13.15 3.52z"}})])],2),r("div",{staticClass:"control control2"},[r("svg",{attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},on:{click:function(e){return t.ptzCmd(t.ptzType.zoomFar)}}},[r("path",{attrs:{d:"M994.990643 859.352971L713.884166 578.246494A381.208198 381.208198 0 0 0 767.307984 383.653992C767.307984 171.765089 595.542895 0 383.653992 0S0 171.765089 0 383.653992s171.765089 383.653992 383.653992 383.653992c71.119859 0 137.507985-19.694238 194.592502-53.423818l281.106477 281.090491a95.913498 95.913498 0 1 0 135.637672-135.621686zM383.653992 671.394486c-158.912681 0-287.740494-128.827813-287.740494-287.740494S224.741311 95.913498 383.653992 95.913498s287.740494 128.827813 287.740494 287.740494-128.827813 287.740494-287.740494 287.740494z m159.85583-335.697243h-111.899081v-111.899081a47.956749 47.956749 0 1 0-95.913498 0v111.899081h-111.899081a47.956749 47.956749 0 1 0 0 95.913498h111.899081v111.899081a47.956749 47.956749 0 1 0 95.913498 0v-111.899081h111.899081a47.956749 47.956749 0 1 0 0-95.913498z"}})]),r("svg",{attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},on:{click:function(e){return t.ptzCmd(t.ptzType.zoomNear)}}},[r("path",{attrs:{d:"M994.990643 859.352971L713.884166 578.246494A381.208198 381.208198 0 0 0 767.307984 383.653992C767.307984 171.765089 595.542895 0 383.653992 0S0 171.765089 0 383.653992s171.765089 383.653992 383.653992 383.653992c71.119859 0 137.507985-19.694238 194.592502-53.423818l281.106477 281.090491a95.913498 95.913498 0 1 0 135.637672-135.621686zM383.653992 671.394486c-158.912681 0-287.740494-128.827813-287.740494-287.740494S224.741311 95.913498 383.653992 95.913498s287.740494 128.827813 287.740494 287.740494-128.827813 287.740494-287.740494 287.740494z m159.85583-335.697243H223.798162a47.956749 47.956749 0 1 0 0 95.913498h319.71166a47.956749 47.956749 0 1 0 0-95.913498z"}})])]),r("div",{staticClass:"control control3"},[r("svg",{attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},on:{click:function(e){return t.ptzCmd(t.ptzType.apertureFar)}}},[r("path",{attrs:{d:"M956.39 400.827C922.164 266.675 828.186 155.703 701.502 99.874l94.522 443.782L956.39 400.827zM206.208 189.167C106.183 286.191 56.845 424.181 72.696 562.659l351.347-309.096-217.835-64.396zM643.118 78.847a446.363 446.363 0 0 0-138.947-16.775 448.047 448.047 0 0 0-250.583 86.934l437.868 146.949-48.338-217.108zM83.786 623.979c34.443 133.772 128.248 244.407 254.583 300.291l-95.915-426.55L83.786 623.979zM969.893 496.089a372.746 372.746 0 0 0-2.37-34.138l-329.972 303.78 196.157 69.256c91.522-88.456 141.056-211.704 136.185-338.898zM396.862 945.166a447.857 447.857 0 0 0 139.077 16.766 447.784 447.784 0 0 0 250.322-86.718L349.286 733.05l47.576 212.116z"}}),r("path",{attrs:{fill:"#333333",d:"M397.253 471.171h245.668c22.593 0 40.923 18.32 40.923 40.913 0 22.592-18.33 40.922-40.923 40.922H397.253c-22.592 0-40.922-18.33-40.922-40.922 0-22.593 18.33-40.913 40.922-40.913z"}}),r("path",{attrs:{fill:"#333333",d:"M479.17 634.879V389.21c0-22.593 18.32-40.923 40.913-40.923s40.923 18.33 40.923 40.923v245.668c0 22.592-18.33 40.922-40.923 40.922s-40.913-18.329-40.913-40.921z"}})]),r("svg",{attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},on:{click:function(e){return t.ptzCmd(t.ptzType.apertureNear)}}},[r("path",{attrs:{d:"M956.39 400.827C922.164 266.675 828.186 155.703 701.502 99.874l94.522 443.782L956.39 400.827z m-750.182-211.66C106.183 286.191 56.845 424.181 72.696 562.659l351.347-309.096-217.835-64.396z m436.91-110.32a446.363 446.363 0 0 0-138.947-16.775 448.047 448.047 0 0 0-250.583 86.934l437.868 146.949-48.338-217.108zM83.786 623.979c34.443 133.772 128.248 244.407 254.583 300.291l-95.915-426.55L83.786 623.979z m886.107-127.89a372.746 372.746 0 0 0-2.37-34.138l-329.972 303.78 196.157 69.256c91.522-88.456 141.056-211.704 136.185-338.898zM396.862 945.166a447.857 447.857 0 0 0 139.077 16.766 447.784 447.784 0 0 0 250.322-86.718L349.286 733.05l47.576 212.116z m0.391-474.039h245.668c22.593 0 40.923 18.32 40.923 40.912 0 22.593-18.33 40.923-40.923 40.923H397.253c-22.592 0-40.922-18.33-40.922-40.923 0-22.592 18.33-40.912 40.922-40.912z"}})])]),r("div",{staticClass:"control control4"},[r("svg",{attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},on:{click:function(e){return t.ptzCmd(t.ptzType.focusFar)}}},[r("path",{attrs:{d:"M849.07153297 646.81872559c9.30432153 0 17.26391602 3.30249 23.82934617 9.88769507 6.60992408 6.59509253 9.88769508 14.52502465 9.88769508 23.79473901v101.14617896c0 27.90801978-9.87780761 51.70275879-29.61364722 71.47814965-19.75067115 19.77539086-43.56518578 29.66308594-71.48803711 29.66308594h-101.1165166c-9.32409644 0-17.25402856-3.29754663-23.83428954-9.9865725-6.59509253-6.49127173-9.90252662-14.52502465-9.90252662-23.7947383 0-9.26971435 3.30743408-17.20458984 9.90252662-23.79473901 6.58026099-6.59014916 14.51019311-9.88769508 23.83428954-9.88769507h101.1165166c9.29937744 0 17.26391602-3.29754663 23.82440137-9.88769579 6.61486816-6.59014916 9.88769508-14.52008057 9.88769579-23.89361573v-101.04235815c0-9.36859107 3.28765845-17.30346656 9.89758254-23.78979493 6.57531762-6.69396997 14.52502465-9.99151587 23.83923363-9.99151587l-0.06427025 0.09887671zM242.38726782 141.3103025h101.10168506c9.30432153 0 17.2688601 3.29754663 23.819458 9.88769578 6.62475562 6.59509253 9.89758325 14.52502465 9.89758254 23.7947383 0 9.37353516-3.27282691 17.30346656-9.89758254 23.79473901-6.5505979 6.69396997-14.51513648 9.9865725-23.81451463 9.9865725h-101.10168433c-9.31915307 0-17.2688601 3.19372583-23.82934547 9.88769508-6.62475562 6.49127173-9.91241479 14.52502465-9.91241479 23.794739v101.04235816c0 9.36859107-3.28271508 17.30346656-9.89758324 23.89361573-6.57531762 6.59014916-14.51513648 9.88769508-23.81451392 9.88769507-9.31420898 0-17.25402856-3.29754663-23.82934547-9.88769507C144.49908423 360.80230689 141.21142578 352.86743141 141.21142578 343.49884033V242.45648217c0-27.91296386 9.86792016-51.70275879 29.62353539-71.47814965 19.75067115-19.77539086 43.57507324-29.66308594 71.48803711-29.66308594h0.06426954zM174.9877932 646.81872559c9.30432153 0 17.24414039 3.30249 23.81451393 9.88769507 6.62475562 6.59509253 9.90252662 14.52502465 9.90252662 23.79473901v101.14617896c0 9.26971435 3.27282691 17.19964576 9.89758324 23.78979492 6.57531762 6.59014916 14.51513648 9.88769508 23.81451393 9.88769579h101.12640404c9.29937744 0 17.25402856 3.29754663 23.82934547 9.88769507 6.60992408 6.59014916 9.88769508 14.52502465 9.88769579 23.89361572 0 9.26971435-3.27777099 17.20458984-9.88769579 23.79473901-6.57531762 6.59014916-14.52996803 9.88769508-23.82934547 9.88769508H242.41693092c-27.91296386 0-51.71264625-9.88769508-71.47814895-29.66308594-19.75561523-19.67651344-29.62353539-43.57012915-29.62353539-71.47814965v-101.04235816c0-9.26971435 3.27282691-17.30346656 9.88769507-23.89361573 6.58026099-6.59509253 14.52502465-9.88769508 23.81451464-9.88769507h-0.02966309zM680.57037329 141.3103025h101.1165166c27.92285133 0 51.73736596 9.88769508 71.48803711 29.56420922 19.73583961 19.77539086 29.61364722 43.57012915 29.61364722 71.47814965v101.14617896c0 9.26971435-3.27777099 17.30346656-9.88769508 23.78979493-6.56542945 6.69396997-14.52502465 9.88769508-23.82934617 9.88769506-9.29937744 0-17.26391602-3.19372583-23.82440139-9.88769506-6.61486816-6.48632836-9.88769508-14.52008057-9.88769579-23.78979493V242.35266137c0-9.26971435-3.28765845-17.19964576-9.90252661-23.78979492-6.57037354-6.59509253-14.52008057-9.88769508-23.83428955-9.88769579h-101.10168433c-9.31420898 0-17.2688601-3.29754663-23.82934618-9.88769507-6.60992408-6.59509253-9.89758325-14.52502465-9.89758254-23.79473902 0-9.37353516 3.28765845-17.30346656 9.89758254-23.89361571 6.56048608-6.59014916 14.51513648-9.88769508 23.82934618-9.88769508l0.04943799 0.09887672z"}})]),r("svg",{attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},on:{click:function(e){return t.ptzCmd(t.ptzType.focusNear)}}},[r("path",{attrs:{d:"M512 170.666667A341.333333 341.333333 0 1 1 170.666667 512 341.333333 341.333333 0 0 1 512 170.666667m0-42.666667a384 384 0 1 0 384 384A384 384 0 0 0 512 128z"}}),r("path",{attrs:{fill:"#333333",d:"M298.666667 533.333333H170.666667a21.333333 21.333333 0 0 1 0-42.666666h128a21.333333 21.333333 0 0 1 0 42.666666zM853.333333 533.333333h-128a21.333333 21.333333 0 0 1 0-42.666666h128a21.333333 21.333333 0 0 1 0 42.666666zM512 320a21.333333 21.333333 0 0 1-21.333333-21.333333V170.666667a21.333333 21.333333 0 0 1 42.666666 0v128a21.333333 21.333333 0 0 1-21.333333 21.333333zM512 874.666667a21.333333 21.333333 0 0 1-21.333333-21.333334v-128a21.333333 21.333333 0 0 1 42.666666 0v128a21.333333 21.333333 0 0 1-21.333333 21.333334z"}})])]),r("div",{staticClass:"control5"},[r("i-select",{staticStyle:{width:"100px"},model:{value:t.ptzPositionIndex,callback:function(e){t.ptzPositionIndex=e},expression:"ptzPositionIndex"}},t._l(10,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v("预置点"+t._s(e))])})),1),r("i-button",{attrs:{type:"primary"},on:{click:function(e){return t.ptzCmd(t.ptzType.setPos)}}},[t._v("设置")]),r("i-button",{attrs:{type:"success"},on:{click:function(e){return t.ptzCmd(t.ptzType.calPos)}}},[t._v("调用")]),r("i-button",{attrs:{type:"error"},on:{click:function(e){return t.ptzCmd(t.ptzType.delPos)}}},[t._v("删除")]),t._v(" 速度： "),r("InputNumber",{attrs:{max:10,min:1},model:{value:t.ptzSpeed,callback:function(e){t.ptzSpeed=e},expression:"ptzSpeed"}})],1)]),r("div",{attrs:{slot:"footer"},slot:"footer"},[t.remoteSDP?r("mu-badge",[r("a",{attrs:{slot:"content",href:t.remoteSDPURL,download:"remoteSDP.txt"},slot:"content"},[t._v("remoteSDP")])]):t._e(),t.localSDP?r("mu-badge",[r("a",{attrs:{slot:"content",href:t.localSDPURL,download:"localSDP.txt"},slot:"content"},[t._v("localSDP")])]):t._e()],1)])},u=[],h=r("88a2");const l=[h["a"].up,h["a"].right,h["a"].down,h["a"].left,h["a"].leftUp,h["a"].rightUp,h["a"].leftDown,h["a"].rightDown];let f=null;var p={data(){return{iceConnectionState:f&&f.iceConnectionState,stream:null,localSDP:"",remoteSDP:"",remoteSDPURL:"",localSDPURL:"",streamPath:"",ptzSpeed:5,ptzPositionIndex:1,ptzType:h["a"]}},methods:{async play(t){f=new RTCPeerConnection,f.addTransceiver("video",{direction:"recvonly"}),this.streamPath=t,f.onsignalingstatechange=t=>{},f.oniceconnectionstatechange=t=>{this.$toast.info(f.iceConnectionState),this.iceConnectionState=f.iceConnectionState},f.onicecandidate=t=>{console.log(t)},f.ontrack=t=>{"video"==t.track.kind&&(this.stream=t.streams[0])},await f.setLocalDescription(await f.createOffer()),this.localSDP=f.localDescription.sdp,this.localSDPURL=URL.createObjectURL(new Blob([this.localSDP],{type:"text/plain"}));const e=await this.ajax({type:"POST",processData:!1,data:JSON.stringify(f.localDescription.toJSON()),url:"/webrtc/play?streamPath="+this.streamPath,dataType:"json"});e.errmsg?this.$toast.error(e.errmsg):(this.remoteSDP=e.sdp,this.remoteSDPURL=URL.createObjectURL(new Blob([this.remoteSDP],{type:"text/plain"})),await f.setRemoteDescription(new RTCSessionDescription(e)))},ptzCmdDirection(t){const e=l[t-1];this.ptzCmd(e)},startPtzCmdCycle(){this.ptzCmd(h["a"].right,!0)},stopPtzCmdCycle(){this.ptzCmd(h["a"].stop)},ptzCmd(t,e){this.$emit("ptz",{type:t,speed:this.ptzSpeed,index:this.ptzPositionIndex,cycle:e})},onClosePreview(){f.close()}}},d=p;r("fa43");function g(t,e,r,n,o,i,a,s){var c,u="function"===typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=r,u._compiled=!0),n&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),a?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=c):o&&(c=s?function(){o.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(u.functional){u._injectStyles=c;var h=u.render;u.render=function(t,e){return c.call(e),h(t,e)}}else{var l=u.beforeCreate;u.beforeCreate=l?[].concat(l,c):[c]}return{exports:t,options:u}}var w=g(d,c,u,!1,null,"43b2c727",null),m=w.exports,v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"player-wrap"},[t.rtcStream?[r("video",{attrs:{autoplay:"",muted:"",controls:""},domProps:{srcObject:t.rtcStream,muted:!0}})]:t._e()],2)},y=[],b={name:"WebrtcPlayer",rtcPeerConnection:null,data(){return{iceConnectionState:"",rtcPeerConnectionInit:!1,rtcStream:null}},props:{streamPath:{type:String,default:""}},async created(){await this.initRtcPeerConnection(),console.log("initRtcPeerConnectioned"),this.streamPath&&(await this.play(this.streamPath),console.log("played"))},methods:{async initRtcPeerConnection(){const t=new RTCPeerConnection;t.addTransceiver("video",{direction:"recvonly"}),t.onsignalingstatechange=t=>{console.log("onsignalingstatechange",t)},t.oniceconnectionstatechange=e=>{console.log("oniceconnectionstatechange",t.iceConnectionState)},t.onicecandidate=t=>{console.log("onicecandidate",t)},t.ontrack=t=>{console.log("ontrack",t),"video"===t.track.kind&&(this.rtcStream=t.streams[0])};const e=await t.createOffer();await t.setLocalDescription(e),this.rtcPeerConnectionInit=!0,this.$options.rtcPeerConnection=t},async play(t){const e=this.$options.rtcPeerConnection,r=e.localDescription.toJSON(),n=await this.ajax({type:"POST",processData:!1,data:JSON.stringify(r),url:"/webrtc/play?streamPath="+t,dataType:"json"});n.errmsg?console.error(n.errmsg):e.setRemoteDescription(new RTCSessionDescription({type:n.type,sdp:n.sdp}))},close(){const t=this.$options.rtcPeerConnection;t&&t.close()}},destroyed(){this.close()}},_=b,P=(r("f20e"),g(_,v,y,!1,null,"3d23233a",null)),S=P.exports,C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Modal",t._g(t._b({attrs:{draggable:"",width:"900",title:"录像列表"},on:{"on-ok":function(e){return t.$emit("close")}}},"Modal",t.$attrs,!1),t.$listeners),[t.channel&&t.channel.RecordSP&&t.player?r("webrtc-player2",{attrs:{streamPath:t.channel.RecordSP}}):t.player?r("div",[t._v("正在连接，请稍后")]):r("div",{staticClass:"container"},[r("div",{staticClass:"search"},[r("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",options:t.timeOptions,value:t.search.time,placeholder:"请选择时间",clearable:!1},on:{"on-change":t.handleTimeChange}})],1),r("div",[r("mu-data-table",{attrs:{columns:t.columns,data:t.recordList},scopedSlots:t._u([{key:"default",fn:function(e){return[r("td",[t._v(t._s(e.row.DeviceID))]),r("td",[t._v(t._s(e.row.Name))]),r("td",[t._v(t._s(e.row.startTime))]),r("td",[t._v(t._s(e.row.endTime))]),r("td",[t._v(t._s(e.row.length))]),r("td",[r("m-button",{on:{click:function(r){return t.play(e.row)}}},[t._v("播放")])],1)]}}])})],1)]),t.player?r("div",{attrs:{slot:"footer"},slot:"footer"},[r("mu-button",{on:{click:t.back}},[t._v("返回")])],1):t._e()],1)},T=[];function R(t,e){let r;t||e?"[object Date]"!==Object.prototype.toString.call(t)&&null!==t&&"object"===typeof t?(e=t,r=new Date):"[object Date]"===Object.prototype.toString.call(t)?r=t:(10===(""+t).length&&(t=1e3*parseInt(t)),t=+t,r=new Date(t)):r=new Date,e=e||{};let n={start:0,end:0},o=new Date(r).setHours(e.startHour||0,e.startMin||0,0,0),i=new Date(r).setHours(e.endHour||23,e.endMin||59,59,0);return n.start=new Date(o).getTime(),n.end=new Date(i).getTime(),n}function E(t){let e;if(t>-1){let r=Math.floor(t/3600),n=Math.floor(t/60)%60,o=t%60;o=Math.round(o),e=r<10?"0"+r+":":r+":",n<10&&(e+="0"),e+=n+":",o<10&&(e+="0"),e+=o.toFixed(0)}return e}function D(t,e){if(0===arguments.length)return null;var r,n=e||"{y}-{m}-{d} {h}:{i}:{s}";"object"===typeof t?r=t:(10===(""+t).length&&(t=1e3*parseInt(t)),t=+t,r=new Date(t));var o={y:r.getFullYear(),m:r.getMonth()+1,d:r.getDate(),h:r.getHours(),i:r.getMinutes(),s:r.getSeconds(),a:r.getDay()},i=n.replace(/{(y|m|d|h|i|s|a)+}/g,(t,e)=>{var r=o[e];return"a"===e?["一","二","三","四","五","六","日"][r-1]:(t.length>0&&r<10&&(r="0"+r),r||0)});return i}function A(t){return void 0!==t&&null!==t}new Date;var z={name:"Records",components:{WebrtcPlayer2:S},props:["search","channel"],data(){return{player:!1,timeOptions:{disabledDate(t){return t&&t.valueOf()>Date.now()}},columns:Object.freeze(["设备ID","名称","开始时间","结束时间","时长","操作"].map(t=>({title:t})))}},computed:{records(){return this.channel&&this.channel.Records||[]},startTime(){if(!this.search.time)return"";const t=R(this.search.time).start,e=new Date(t).toISOString();return e.replace(".000Z","")},endTime(){if(!this.search.time)return"";const t=R(this.search.time).end,e=new Date(t).toISOString();return e.replace(".000Z","")},recordList(){const t=this.records.map(t=>{const e=new Date(t.StartTime).getTime(),r=new Date(t.EndTime).getTime(),n=r-e,o=E(n/1e3),i=D(e),a=D(r);return t._startTime=e/1e3>>0,t._endTime=r/1e3>>0,t.length=o,t.startTime=i,t.endTime=a,t});return t}},mounted(){this._fetchList()},methods:{_fetchList(){if(A(this.search.id)&&A(this.search.channel)&&this.startTime&&this.endTime){const t={id:this.search.id,channel:this.search.channel,startTime:this.startTime,endTime:this.endTime};this.ajax.get("/gb28181/query/records",t).then(t=>{})}},handleTimeChange(t){this.search.time=new Date(t),this._fetchList()},play(t){const e={id:this.search.id,channel:this.search.channel,startTime:t._startTime,endTime:t._endTime};this.ajax.get("/gb28181/invite",e).then(t=>{}),this.player=!0},back(){fetch("/api/stop?stream="+this.streamPath),this.player=!1}}},x=z,I=(r("0da8"),g(x,C,T,!1,null,"1496ea1d",null)),M=I.exports,U={components:{WebrtcPlayer:m,WebrtcPlayer2:S,Records:M},props:{ListenAddr:String},computed:{PublicIP(){return this.ListenAddr.split(":")[0]}},data(){return{Devices:[],previewStreamPath:!1,channelList:[],channelShowList:[],pageInfo:{onePageSize:9,totalPage:0,currentPage:0},currentChannel:null,recordModal:!1,recordSearch:{id:null,channel:null,deviceId:null},context:{id:null,channel:0,item:null},columns:Object.freeze(["设备号","地址","通道数","注册时间","更新时间","状态"].map(t=>({title:t}))),columns2:Object.freeze(["通道编号","名称","厂商","地址","状态","操作"]).map(t=>({title:t}))}},created(){this.fetchlist()},mounted(){this.$parent.titleTabs=["列表","N路播放"]},methods:{fetchlist(){const t=new EventSource("/gb28181/list");t.onmessage=t=>{if(!t.data)return;this.Devices=JSON.parse(t.data)||[],this.Devices.sort((t,e)=>t.ID>e.ID?1:-1);let e=[];this.Devices.forEach(t=>{const r=t.Channels||[];if(r.length>0&&(e=e.concat(r)),this.recordSearch.id&&this.recordSearch.deviceId){const e=r.find(e=>e.DeviceID===this.recordSearch.deviceId&&this.recordSearch.id===t.ID);e&&(this.currentChannel=e)}}),e.length>0&&(this.channelList=e,this.updatePageInfo(e.length))},this.$once("hook:destroyed",()=>t.close())},ptz(t,e,r){this.context={id:t,channel:e,item:r},this.previewStreamPath=!0,this.$nextTick(()=>this.$refs.player.play(r.LiveSP))},sendPtz(t){const e=Object(h["b"])(t),r=Object(h["b"])({type:h["a"].stop});this.ajax.get("/gb28181/control",{id:this.context.id,channel:this.context.channel,ptzcmd:e}).then(e=>{t.type!==h["a"].stop&&!0!==t.cycle&&setTimeout(()=>{this.ajax.get("/gb28181/control",{id:this.context.id,channel:this.context.channel,ptzcmd:r})},500)})},sendQueryRecords(t){},handlePageChange(t){let e=[];const r=this.pageInfo.onePageSize,n=t*r-r,o=t*r-1;e=this.channelList.filter((t,e)=>e>=n&&e<=o),this.channelShowList=e,e.length>0&&(this.pageInfo.currentPage=t)},updatePageInfo(t){const e=this.pageInfo.onePageSize;let r=t/e;t%e>0&&(r+=1),this.pageInfo.totalPage=r,0===this.pageInfo.currentPage&&this.handlePageChange(1)},invite(t,e,r){this.ajax.get("/gb28181/invite",{id:t,channel:e}).then(t=>{r.Connected=!0})},bye(t,e,r){this.ajax.get("/gb28181/bye",{id:t,channel:e}).then(t=>{r.Connected=!1})},getRecords(t,e,r){this.recordSearch.id=t,this.recordSearch.channel=e,this.recordSearch.deviceId=r.DeviceID,this.recordModal=!0},initRecordSearch(){this.recordModal=!1,this.recordSearch.id=null,this.recordSearch.channel=null,this.recordSearch.deviceId=null}}},B=U,L=(r("72fc"),g(B,a,s,!1,null,"f9042a1a",null)),O=L.exports;e["default"]=O}})["default"]}));
//# sourceMappingURL=plugin-gb28181.umd.min.js.map